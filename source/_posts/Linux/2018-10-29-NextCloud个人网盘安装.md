---
title: NextCloud个人网盘安装
date: 2018-10-29 02:30:46
categories:
- Linux
tags:
- Linux
- Software
- Web
- Blog
- Nextcloud
---
# 面板安装

面板安装比较简单
1. 去Nextcloud官网下载[服务器安装包](https://nextcloud.com/install/)
2. 面板安装完LAMP或LNMP之后，添加一个站点，并添加一个数据库，用户名密码自行设置。
3. 打开刚创建的站点的根目录下，删除所有文件。
4. 点开面板的文件模块（浏览文件），将下载的服务器安装包`.tar.gz`文件放置到某个目录下，并且`tar -zxcf 文件名.tar.gz`解压缩，得到一个nextcloud文件夹。（或者.zip 用`unzip`命令解压缩，道理同上）
5. 进入nextcloud文件夹，将所有文件复制到刚创建的站点根目录下。
6. 打开对应的域名，填写相应的数据即完成安装。
7. 如果需要打开多端同步，那么域名则需要能在公网解析到，并且打开了Https协议，也即需要一个SSL证书。SSL证书可以使用Let's Encrypt免费注册一个，三个月到期，到期需要续签。（宝塔面板可以自动续签）

## 注意

- 我这里用的是阿里云的域名，用的是校园网，并且网页端可以正常打开Nextcloud（虽然速度非常的慢）。如果简单的打开Nextcloud的桌面端或手机端，很容易提示`找不到主机名`或`404 NOT FOUND`等等错误。
- 主要原因猜想在于校园网DNS污染严重，并且阿里云的域名解析线路选择不正确，导致不能正确的解析服务器的IP，（cmd 测试`ping 域名`时发生找不到主机的错误 ）需要正确配置解析路线并且绕开校园网（即代理）。应该是存在SSL证书的解析问题。
- 最后多端同步时
 * Windows端因为已经安装并配置好了shadowsocks，所以在桌面端的网络设置里，打开代理，选择Socks5协议，地址填`127.0.0.1`，端口`1080`，不验证即可。
 * Web端Chrome里用的是SwitchyOmega，将站点选择用代理连接即可
 * 手机端则开启安卓版的Shadowsocks即可。
- 还有一种方案就是等，等到dns的解析全面生效，但并不能稳定性和性能。

# 非面板安装

非面板安装过程较为繁琐，用[一键包](https://lnmp.org/)安装LAMP或LNMP架构，再添加站点，并且选择自动SSL证书申请，填写数据库等相应信息，后续过程与面板安装的1-6相似。
 